<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apple Weather Clone</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(to bottom, #1e3c72, #2a5298);
      color: white;
      display: flex;
      justify-content: center;
    }
    .weather-app {
      max-width: 600px;
      width: 100%;
      padding: 20px;
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    .header h1 {
      font-size: 4rem;
      margin: 0;
    }
    .header h2 {
      font-size: 1.5rem;
      margin: 5px 0;
      font-weight: 400;
    }
    .hourly, .daily {
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 15px;
      margin-bottom: 20px;
    }
    .hourly-scroll {
      display: flex;
      overflow-x: auto;
      gap: 15px;
    }
    .hour-card {
      text-align: center;
      min-width: 60px;
    }
    .daily .day-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    .details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    .detail-card {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px;
      text-align: center;
    }
    .detail-card h3 {
      margin: 5px 0;
      font-size: 1rem;
      font-weight: 400;
    }
    .detail-card p {
      margin: 0;
      font-size: 1.2rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="weather-app">
    <div class="header" id="currentWeather">
      <h2>Loading...</h2>
    </div>

    <div class="hourly">
      <h3>Hourly Forecast</h3>
      <div class="hourly-scroll" id="hourlyForecast"></div>
    </div>

    <div class="daily">
      <h3>10-Day Forecast</h3>
      <div id="dailyForecast"></div>
    </div>

    <div class="details" id="details"></div>
  </div>

  <script>
    async function fetchWeather(lat, lon, locationName="Your Location") {
      const res = await fetch(
        `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=temperature_2m,precipitation_probability&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset,precipitation_sum,uv_index_max,moon_phase&timezone=auto`
      );
      const data = await res.json();
      displayWeather(data, locationName);
    }

    function displayWeather(data, locationName) {
      const current = data.current_weather;
      const nowTemp = Math.round(current.temperature);
      const desc = "Feels like " + nowTemp + "°";

      // Current
      document.getElementById("currentWeather").innerHTML = `
        <h2>${locationName}</h2>
        <h1>${nowTemp}°</h1>
        <h2>${desc}</h2>
      `;

      // Hourly
      const hourlyEl = document.getElementById("hourlyForecast");
      hourlyEl.innerHTML = "";
      for (let i = 0; i < 12; i++) {
        const time = new Date(data.hourly.time[i]).getHours();
        const temp = Math.round(data.hourly.temperature_2m[i]);
        const pop = data.hourly.precipitation_probability[i];
        hourlyEl.innerHTML += `
          <div class="hour-card">
            <div>${time}:00</div>
            <div>${temp}°</div>
            <div>${pop}%</div>
          </div>
        `;
      }

      // Daily
      const dailyEl = document.getElementById("dailyForecast");
      dailyEl.innerHTML = "";
      for (let i = 0; i < 10; i++) {
        const date = new Date(data.daily.time[i]);
        const day = date.toLocaleDateString("en-US", { weekday: "short" });
        const min = Math.round(data.daily.temperature_2m_min[i]);
        const max = Math.round(data.daily.temperature_2m_max[i]);
        const pop = data.daily.precipitation_sum[i];
        dailyEl.innerHTML += `
          <div class="day-row">
            <div>${day}</div>
            <div>${max}° / ${min}°</div>
            <div>${pop}mm</div>
          </div>
        `;
      }

      // Details
      const detailsEl = document.getElementById("details");
      detailsEl.innerHTML = `
        <div class="detail-card">
          <h3>Sunrise</h3><p>${new Date(data.daily.sunrise[0]).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</p>
        </div>
        <div class="detail-card">
          <h3>Sunset</h3><p>${new Date(data.daily.sunset[0]).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</p>
        </div>
        <div class="detail-card">
          <h3>UV Index</h3><p>${data.daily.uv_index_max[0]}</p>
        </div>
        <div class="detail-card">
          <h3>Moon Phase</h3><p>${data.daily.moon_phase[0].toFixed(2)}</p>
        </div>
      `;
    }

    // Detect location
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        fetchWeather(pos.coords.latitude, pos.coords.longitude);
      },
      () => {
        fetchWeather(40.7128, -74.0060, "New York"); // fallback
      }
    );
  </script>
</body>
</html>
